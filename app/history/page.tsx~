"use client";
import React from "react";
import { DataTable } from "primereact/datatable";
import { Column } from "primereact/column";
import styled from "styled-components";
import { Card } from "primereact/card";
import { useSearchContext } from "@/context/SearchContext";
import { useRecentSearches } from "@/hooks/useRecentSearch";
import { searchOptions } from "@/app/page";

const RecentSearchesCard = styled(Card)``;

const Page = () => {
  const { recentSearches } = useRecentSearches();

  return (
    <div>
      <RecentSearchesCard title="Ãšltimas 10 pesquisas realizadas">
        <DataTable value={recentSearches}>
          <Column field="value" header="Termo" />
          <Column
            field="type"
            header="Tipo"
            body={(row) =>
              searchOptions.find((opt) => opt.value === row.type)?.label ||
              row.type
            }
          />
          <Column
            field="timestamp"
            header="Data"
            body={(row) => new Date(row.timestamp).toLocaleString()}
          />
        </DataTable>
      </RecentSearchesCard>
    </div>
  );
};

export default Page;
